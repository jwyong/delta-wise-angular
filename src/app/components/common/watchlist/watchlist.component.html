<div class="d-flex flex-column h-100">
    <div class="d-flex align-items-center mb-2">
        <h1 class="my-auto me-3" i18n="@@watchlists">Watchlists</h1>
        <mat-chip *ngIf="!isLoading()" class="cursor-pointer" i18n="@@add_new_watchlist"
            (click)="showNewWatchlistDialog()"> + Add new watchlist
        </mat-chip>
        <button class="ms-2" mat-icon-button (click)="isEditMode = !isEditMode">
            <mat-icon *ngIf="shouldShowWLEditBtn()" class="scale-08">{{isEditMode? 'done' : 'edit'}}</mat-icon>
        </button>
    </div>

    <mat-chip-list class="scrollable-chip-list pb-3" cdkDropList cdkDropListOrientation="horizontal">
        <div *ngIf="shouldShowWatchlists()">
            <mat-chip class="cursor-pointer" color="accent" cdkDrag *ngFor="let watchlist of watchlists"
                (removed)="removeChipOnClick(watchlist)" (click)="chipOnClick(watchlist)"
                [selected]="selectedWatchlist.id == watchlist.id">
                {{watchlist.name}}
                <button *ngIf="isEditMode" matChipRemove>
                    <mat-icon>cancel</mat-icon>
                </button>
            </mat-chip>
        </div>
    </mat-chip-list>

    <hr class="my-0" *ngIf="shouldShowWatchlists()">
    <mat-progress-bar *ngIf="isLoadingWatchlist" mode="indeterminate"></mat-progress-bar>

    <div *ngIf="shouldShowWLItems()">
        <mat-list role="list">
            <div mat-subheader>{{selectedWatchlist.name}}</div>

            <mat-list-item *ngFor="let item of selectedWatchlist.children">
                <div class="d-flex align-items-center">
                    <p class="my-0 me-2">{{item.company}} ({{item.ticker}})</p>
                    <mat-icon class="text-secondary scale-08" *ngIf="isEditMode">cancel</mat-icon>
                </div>
            </mat-list-item>
        </mat-list>
    </div>

    <div class="m-auto text-center cursor-pointer" (click)="emptyWatchlistOnClick()" *ngIf="shouldShowEmptyUx()">
        <mat-icon class="scale-2">
            {{isWatchlistsEmpty()? "playlist_add" : "search"}}
        </mat-icon>
        <p class="mt-3" i18n="@@no_watchlist">
            {{isWatchlistsEmpty()? "No watchlists yet." : "No items in this watchlist."}}
            <br>
            {{isWatchlistsEmpty()? "Click here to add new watchlist." :
            "Search for a company and add it to your watchlist."}}
        </p>
    </div>
</div>